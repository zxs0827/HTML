!function(){"use strict";function e(e){var t=e;Object.defineProperties(this,{r:{get:function(){return t.r},set:function(e){t.r=e}},g:{get:function(){return t.r},set:function(e){t.g=e}},b:{get:function(){return t.r},set:function(e){t.b=e}},a:{get:function(){return t.r},set:function(e){t.a=e}},equals:{value:function(e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a}},hexBase:{value:function(){var e=t.r.toString(16),n=t.g.toString(16),o=t.b.toString(16),r=1===e.length?"0"+e:e,s=1===n.length?"0"+n:n,a=1===o.length?"0"+o:o;return r+s+a}},toHexString:{value:function(){return"#"+this.hexBase()+(1===t.a?"":"   "+Math.round(100*t.a)+"%")}},toARGBHexString:{value:function(){var e="#";if(1!==t.a){var n=Math.round(255*t.a).toString(16);e+=1===n.length?"0"+n:n}return e+this.hexBase()}},toRGBAString:{value:function(){var e=t.r+" "+t.g+" "+t.b;return 1===t.a?"rgb "+e:"rgba "+e+" "+Math.round(100*t.a)/100}},toPlatformString:{value:function(e){switch(e){case"android":return this.toARGBHexString();case"ios":case"osx":return this.toRGBAString();case"web":return this.toCSS()}}},toCSS:{value:function(){return 1===t.a?"#"+this.hexBase():"rgba("+t.r+", "+t.g+", "+t.b+", "+Math.round(100*t.a)/100+")"}}})}function t(){po={},location.hash?(location.hash.substr(1).split("&").forEach(function(e){var t=e.split("=");po[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}),"pid"in po?mo&&mo._id===po.pid?fo?a():(o(mo),i(po.pid),mixpanel.track("Opened project",{source:"library"})):(i(po.pid),mixpanel.track("Opened project",{source:"direct"})):location.replace("projects.html")):location.replace("projects.html")}function n(){var e={scope:"incoming-webhook",client_id:"2330702581.8730394641",redirect_uri:location.origin+"/huggingSlack.html?pid="+mo._id,state:Zeplin.user.token.substr(Zeplin.user.token.lastIndexOf(".")+1)},t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return"https://slack.com/oauth/authorize?"+t.join("&")}function o(e){if(ho={},go=0,yo={},vo=0,bo=null,xo=null,Eo=null,ko=null,tt=null,Io=null,qo=null,To=null,Ro=null,fo=!0,it.textContent="Dashboard - "+e.name+" - Zeplin",ct.textContent=e.name,mt.className="sidebarIcon noEvent",mt.classList.add(e.icon.type),pt.textContent=e.name,Cn.title=e.name,Rt.textContent=Zeplin.projectTypes[e.type],"integration"in e){document.getElementById("slackTeam").textContent=e.integration.slack.teamName,document.getElementById("slackSettings").href=e.integration.slack.incomingWebHook.configurationURL;var t=new URL(e.integration.slack.incomingWebHook.configurationURL);document.getElementById("slackChannel").textContent=e.integration.slack.incomingWebHook.channel,document.getElementById("slackChannel").href=t.origin+"/messages/"+e.integration.slack.incomingWebHook.channel,document.getElementById("slackIntegration").classList.add("enabled")}else"owner"===document.body.dataset.userRole||"admin"===document.body.dataset.userRole?Zt.href=n():Zt.removeAttribute("href");_o="android"===e.type?"mdpi":"1x",r(e.density),ht.innerHTML="",e.users?e.users.forEach(c):u(),co.innerHTML="",co.scrollTop=0,e.screens&&e.screens.forEach(function(e,t){E(e,t),ho[e._id]={req:v(e),ready:!0,attempts:3},yo[e._id]={req:b(e),ready:!0,attempts:3}}),ft.textContent=e.name,document.getElementById("infoProjectType").textContent=Zeplin.projectTypes[e.type];var o=e.updated?new Date(e.updated):new Date,i=new Date(e.created);qt.textContent=o.toLocaleString(navigator.language,Qe),qt.dateTime=o.toISOString(),Tt.textContent=i.toLocaleString(navigator.language,Qe),Tt.dateTime=i.toISOString(),e.colors&&(_t.innerHTML="",e.colors.forEach(S)),Lt.className=e.type,e.prefix&&s(e.prefix),a()}function r(e){switch(mo.density=e,e){case"mdpi":case"1x":case"web":case"unknown":default:nt=1;break;case"hdpi":nt=1.5;break;case"xhdpi":case"2x":nt=2;break;case"xxhdpi":case"3x":nt=3;break;case"xxxhdpi":case"4x":nt=4}if("unknown"===e)ot="px",rt="px";else switch(mo.type){case"android":ot="dp",rt="sp";break;case"ios":case"osx":ot="pt",rt="pt";break;case"web":default:ot="px",rt="px"}document.getElementById("infoProjectDensity").textContent=e}function s(e){mo.prefix=e,xt.value=e.toUpperCase()+"Colors",Et.value=e,Ct.value=mo.prefix.toUpperCase()+"Colors",St.value=mo.prefix}function a(){if("sid"in po&&(!bo||bo._id!==po.sid)){for(var e=0;e<mo.screens.length;e++)if(mo.screens[e]._id===po.sid){oe(e,{scrollOptions:{behavior:"instant"},updateURL:!1});break}}else"dashboard"in po&&So!==so?(So.classList.add("hidden"),So=so,Co.classList.remove("selected"),Co=Cn,Lo=-2,bo=null,it.textContent="Dashboard - "+mo.name+" - Zeplin",ct.textContent=mo.name,At.classList.add("hidden"),re(),y(),ut.scrollTop=0,So.classList.remove("hidden"),Co.classList.add("selected")):"guideline"in po&&So!==ao&&(So.classList.add("hidden"),So=ao,Co.classList.remove("selected"),Co=Sn,Lo=-1,bo=null,it.textContent="Guideline - "+mo.name+" - Zeplin",ct.textContent="Guideline",At.classList.add("hidden"),re(),y(),ut.scrollTop=0,So.classList.remove("hidden"),Co.classList.add("selected"));bo&&"dots"in bo&&"did"in po&&le(po.did,po.cmid),"screens"in mo&&(L(Lo),x(Lo))}function i(e){var t=new XMLHttpRequest;t.open("GET",Zeplin.urls.baseURL+"/projects/"+e),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Zeplin-Token",Zeplin.user.token),t.responseType="json",t.addEventListener("load",function(){switch(t.status){case 200:mo=t.response,o(mo),Po=!1,No=5;break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(t.response.title+"\n"+t.response.message),location.replace("login.html");break;default:alert(t.response?t.response.title+"\n"+t.response.message:"We're experiencing a problem here, our developers are on the case. Please try again later.")}}),t.addEventListener("error",function(){No--?setTimeout(function(){i(e)},500):Po||alert("We're experiencing a problem here, our developers are on the case. Please try again later.")}),t.addEventListener("loadend",function(){at.classList.add("hidden")}),Po||at.classList.remove("hidden"),t.send()}function d(e,t){return"owner"===e.role?-1:"owner"===t.role?1:"admin"===e.role?-1:"admin"===t.role?1:0}function c(e){var t=gt.querySelector(".memberImage"),o=We+md5(e.user.email);e.user._id===Zeplin.user._id&&(document.body.dataset.userRole=e.role,"owner"===document.body.dataset.userRole||"admin"===document.body.dataset.userRole?Zt.href=n():Zt.removeAttribute("href")),t.src=o+"?s=80",t.srcset=o+"?s=160 2x",gt.querySelector(".member").dataset.id=e.user._id,gt.querySelector(".memberName").textContent=e.user.username||e.user.email;var r="";"owner"===e.role?r="Owner":"admin"===e.role?r="Admin":"invited"===e.user.status&&(r="Pending Invitation"),gt.querySelector(".memberRole").textContent=r,ht.appendChild(document.importNode(gt,!0))}function l(e){mo.users=(e||mo.users).sort(d),ht.innerHTML="",mo.users.forEach(c),bo&&se(),st=new RegExp("@(?:everyone|all|tutti|"+e.filter(function(e){return e.user.username}).map(function(e){return e.user.username}).join("|")+")","gi")}function u(){var e=new XMLHttpRequest;e.open("GET",Zeplin.urls.baseURL+"/projects/"+mo._id+"/users"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Zeplin-Token",Zeplin.user.token),e.responseType="json",e.addEventListener("load",function(){switch(e.status){case 200:l(e.response.users),"did"in po&&le(po.did,po.cmid);break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(e.response.title+"\n"+e.response.message),location.replace("login.html");break;default:console.error("Error while fetching users of project"),alert(e.response?e.response.title+"\n"+e.response.message:"We're experiencing a problem here, our developers are on the case. Please try again later.")}}),e.addEventListener("error",function(){console.error("Error while fetching users of project")}),e.send()}function m(e){wo=Math.min(Math.max(e.clientX,200),280),200===wo?(document.body.classList.remove("resizeLeft"),document.body.classList.remove("resizeLeftRight"),document.body.classList.add("resizeRight")):280===wo?(document.body.classList.remove("resizeRight"),document.body.classList.remove("resizeLeftRight"),document.body.classList.add("resizeLeft")):(document.body.classList.remove("resizeLeft"),document.body.classList.remove("resizeRight"),document.body.classList.add("resizeLeftRight")),Pt.style.width=wo+"px",In.style.left=wo+12+"px",Rn.style.backgroundPosition="calc(50vw - "+(140+wo/2+bo.currentSnapshot.width/devicePixelRatio/2)+"px) 0",Tn.style.width="calc(100vw - "+(280+wo)+"px)"}function p(e){return co.querySelector(".screen:nth-of-type("+(e+1)+")")}function f(e,t){return e*Bo/devicePixelRatio+(t||0)+"px"}function h(e,t){if(void 0===e||void 0===t)return"";var n=parseFloat(e.toFixed(1)),o=Math.round(e)==n?Math.round(n):n,r=parseFloat(t.toFixed(1)),s=Math.round(t)==r?Math.round(r):r;return o+"×"+s+ot}function g(e,t){if(void 0===e)return"";var n="text"===t?rt:ot,o=e/nt,r=parseFloat(o.toFixed(1));return(Math.round(o)==r?Math.round(o):r)+n}function y(){return dt.classList.contains("fetching")?(dt.classList.remove("fetching"),setTimeout(function(){dt.classList.add("fetchend"),setTimeout(function(){dt.className="",lt.textContent="Loading layers…"},1e3)},500),void Dt.classList.remove("loading")):void(dt.className="")}function v(e,t){var n=new XMLHttpRequest;return n.open("GET",Zeplin.urls.baseURL+"/projects/"+mo._id+"/screens/"+e._id+"/currentSnapshot"),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Zeplin-Token",Zeplin.user.token),n.responseType="json",n.addEventListener("load",function(){switch(go--,n.status){case 200:e.layers=n.response.layers,e.assets=n.response.assets,bo&&bo._id===e._id&&(J(e,t||"layers"),y()),C(),L(Lo);break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(n.response.title+"\n"+n.response.message),location.replace("login.html");break;case 410:default:console.error(n.response?n.response.title+": "+n.response.message:"Error while fetching layers of screen ("+e._id+")");var o=ho[e._id];o.attempts--?(o.req=v(e),o.ready=!0):bo&&bo._id===e._id&&(J(e,t||"layers"),y()),L(Lo)}}),n.addEventListener("error",function(){console.error("Error while fetching layers of screen ("+e._id+")");var t=ho[e._id];t.attempts--?(t.req=v(e),t.ready=!0):bo&&bo._id===e._id&&(J(e,"layers"),y()),L(Lo)}),n}function L(e){if(5!==go){var t;if(0>e&&(e=0),t=mo.screens[e]){ho[t._id].ready&&(Lo===e&&(dt.classList.remove("fetchend"),dt.classList.add("fetchstart","fetching"),Dt.classList.add("loading"),Ut.classList.add("loading")),ho[t._id].req.send(),ho[t._id].ready=!1,go++);for(var n=e-1,o=e+1;n>-1||o<mo.screens.length;){if(n>-1){var r=ho[mo.screens[n]._id];r.ready&&(Lo===n&&(dt.classList.remove("fetchend"),dt.classList.add("fetchstart","fetching"),Dt.classList.add("loading"),Ut.classList.add("loading")),r.req.send(),r.ready=!1,go++),n--}if(5===go)break;if(o<mo.screens.length){var s=ho[mo.screens[o]._id];s.ready&&(Lo===o&&(dt.classList.remove("fetchend"),dt.classList.add("fetchstart","fetching"),Dt.classList.add("loading"),Ut.classList.add("loading")),s.req.send(),s.ready=!1,go++),o++}if(5===go)break}}}}function b(e){var t=new XMLHttpRequest;return t.open("GET",Zeplin.urls.baseURL+"/projects/"+mo._id+"/screens/"+e._id+"/dots"),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Zeplin-Token",Zeplin.user.token),t.responseType="json",t.addEventListener("load",function(){switch(vo--,t.status){case 200:e.dots=t.response.dots,bo&&bo._id===e._id&&(V(e),"did"in po&&le(po.did,po.cmid)),x(Lo);break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(t.response.title+"\n"+t.response.message),location.replace("login.html");break;case 410:default:console.error(t.response?t.response.title+": "+t.response.message:"Error while fetching layers of screen ("+e._id+")");var n=yo[e._id];n.attempts--?(n.req=b(e),n.ready=!0):bo&&bo._id===e._id&&V(e),x(Lo)}}),t.addEventListener("error",function(){console.error("Error while fetching layers of screen ("+e._id+")");var t=yo[e._id];t.attempts--?(t.req=b(e),t.ready=!0):bo&&bo._id===e._id&&V(e),x(Lo)}),t}function x(e){if(5!==vo){var t;if(0>e&&(e=0),t=mo.screens[e]){yo[t._id].ready&&(yo[t._id].req.send(),yo[t._id].ready=!1,vo++);for(var n=e-1,o=e+1;n>-1||o<mo.screens.length;){if(n>-1){var r=yo[mo.screens[n]._id];r.ready&&(r.req.send(),r.ready=!1,vo++),n--}if(5===vo)break;if(o<mo.screens.length){var s=yo[mo.screens[o]._id];s.ready&&(s.req.send(),s.ready=!1,vo++),o++}if(5===vo)break}}}}function E(e,t){var n=Nt.querySelector(".screen");return n.dataset.index=t,n.dataset.id=e._id,Nt.querySelector(".screenThumbnailImage").src=e.currentSnapshot.url,Nt.querySelector(".screenName").textContent=e.name,co.appendChild(document.importNode(Nt,!0)),co.lastElementChild}function w(){[].forEach.call(document.querySelectorAll(".screen"),function(e,t){e.dataset.index=t})}function C(){var e=[];mo.screens.forEach(function(t){t.layers&&t.layers.forEach(function(t){"text"===t.type&&-1===e.indexOf(t.fontFace)&&e.push(t.fontFace)})}),io.innerHTML="",e.sort().forEach(function(e){var t=document.createElement("div");t.classList.add("font"),t.textContent=e,io.appendChild(t)})}function S(t){var n=new e(t);Bt.querySelector(".color").dataset.id=t._id,Bt.querySelector(".colorPreview").style.backgroundColor=n.toCSS(),Bt.querySelector(".colorName").textContent=t.name,Bt.querySelector(".colorHex").textContent=n.toHexString(),Bt.querySelector(".colorRGB").textContent=n.toRGBAString(),_t.appendChild(document.importNode(Bt,!0))}function k(e,t){var n=Mt.querySelector(".color"),o=Mt.querySelector(".colorName");n.dataset.color=e.toHexString(),Mt.querySelector(".colorPreview").style.backgroundColor=e.toCSS();for(var r,s=0;s<mo.colors.length;s++){var a=mo.colors[s];if(e.equals(a)){r=a;break}}r?(o.textContent=r.name,n.classList.add("added")):(o.textContent="",n.classList.remove("added")),Mt.querySelector(".colorValue").textContent=e.toPlatformString(mo.type),t.appendChild(document.importNode(Mt,!0))}function I(t,n){var o=document.createElement("div");o.classList.add("gradient"),t.colorStops.forEach(function(t){k(new e(t.color),o)}),n.appendChild(o)}function _(t,n){var o="text"===t?sn:ln;switch(n.fillType){case"color":k(new e(n.color),o);break;case"gradient":I(n.gradient,o)}}function B(t){fn.querySelector(".shadowType").textContent=t.type,fn.querySelector(".shadowOffsetX").textContent=g(t.offsetX),fn.querySelector(".shadowOffsetY").textContent=g(t.offsetY),fn.querySelector(".shadowBlurRadius").textContent=g(t.blurRadius),fn.querySelector(".shadowSpread").textContent=g(t.spread),t.blurRadius||t.spread?fn.querySelector(".shadowBlurSpread").classList.remove("hidden"):fn.querySelector(".shadowBlurSpread").classList.add("hidden"),gn.appendChild(document.importNode(fn,!0)),k(new e(t.color),gn)}function q(e){switch(e.format){case"png":return e.displayName+("1x"===e.density?"":"@"+e.density)+"."+e.format;case"pdf":case"svg":return e.displayName+"."+e.format}}function T(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("GET",e.url),o.responseType="arraybuffer",o.addEventListener("load",function(){var n={data:o.response};Object.keys(e).forEach(function(t){n[t]=e[t]}),t(n)}),o.addEventListener("error",function(e){n(e)}),o.send()})}function R(e,t){return e.contents.filter(function(e){return e.format===t}).map(function(t){var n={displayName:e.displayName};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n})}function Z(e,t){var n;if("all"===e)n=[].concat.apply([],bo.assets.map(function(e){return R(e,t)}));else{for(var o,r=0;r<bo.assets.length&&(o=bo.assets[r],o._id!==e);r++);if(!o)return Promise.reject("Asset with id "+e+" not found.");n=R(o,t)}return Promise.all(n.map(T))}function P(e,t){return Z(e,t).then(function(t){var n=new JSZip;return t.forEach(function(e){n.file("drawable-"+e.density+"/"+e.displayName+"."+e.format,e.data)}),{data:URL.createObjectURL(n.generate({type:"blob"})),name:("all"===e?"assets_"+bo.name:t[0].displayName)+"_"+(new Date).toISOString().substr(0,10)+".zip"}})}function N(e,t){return Z(e,t).then(function(n){var o,r;if(1===n.length)o=new Blob([n[0].data],{type:Xe[t]}),r=q(n[0]);else{var s=new JSZip,a=(new Date).toISOString().substr(0,10);n.forEach(function(e){s.file(q(e),e.data)}),o=s.generate({type:"blob"}),r=("all"===e?"assets_"+bo.name:n[0].displayName)+"_"+a+".zip"}return{data:URL.createObjectURL(o),name:r}})}function H(e){var t=document.createElement("a");t.href=e.data,t.download=e.name||"assets.zip",t.classList.add("hidden"),document.body.appendChild(t),t.addEventListener("click",function(n){n.stopPropagation(),setTimeout(function(){URL.revokeObjectURL(e.data)},1500),t.remove()}),t.click()}function A(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT&&e.target.classList.contains("exportAssets")){e.stopPropagation();var t,n=e.target.parentElement.dataset.format,o=e.target.parentElement.dataset.aid;switch(mo.type){case"android":t=P(o,n);break;case"ios":case"osx":case"web":default:t=N(o,n)}t.then(H)}}function O(e){switch(e){case"mdpi":case"1x":case"web":case"unknown":default:return"1x";case"hdpi":return"1.5x";case"xhdpi":case"2x":return"2x";case"xxhdpi":case"3x":return"3x";case"xxxhdpi":case"4x":return"4x"}}function D(e){return new Promise(function(t,n){var o=document.createElement("img"),r=document.createElement("canvas"),s=r.getContext("2d");o.addEventListener("load",function(){s.drawImage(o,0,0);for(var e=s.getImageData(0,0,o.width,o.height).data,n="210",r="light",a=0;a<e.length;a+=4)if(!(e[a+3]<255-n)&&(e[a]<n||e[a+1]<n||e[a+2]<n)){r="dark";break}t({size:h(o.width,o.height),lightness:r})}),o.addEventListener("error",function(e){n(e)}),o.crossOrigin="anonymous",o.src=e.url})}function M(e){for(var t=0;t<e.length;t++)if(e[t].density===_o&&"png"===e[t].format)return e[t]}function U(e){return e.filter(function(e){return"png"===e.format&&e.density!==_o}).map(function(e){return e.url+" "+O(e.density)}).join(", ")}function j(e,t){zt.querySelector(".assetExporter").dataset.aid=e.aid,zt.querySelector(".assetExporter").dataset.format=e.format,zt.querySelector(".assetType").textContent=e.format,zt.querySelector(".assetCount").textContent=e.count,t.appendChild(document.importNode(zt,!0))}function F(e,t){var n=M(e.contents);return D(n).then(function(o){var r=jt.querySelector(".assetPreview img"),s=jt.querySelector(".assetExports");jt.querySelector(".assetPreview").classList.add(o.lightness),jt.querySelector(".assetSize").textContent=o.size,r.src=n.url,r.srcset=U(e.contents),jt.querySelector(".assetName").textContent=e.displayName;var a={};e.contents.forEach(function(e){e.format in a?a[e.format]++:a[e.format]=1}),s.innerHTML="";for(var i in a)j({aid:e._id,format:i,count:a[i]},s);t.appendChild(document.importNode(jt,!0)),jt.querySelector(".assetPreview").classList.remove(o.lightness)})["catch"](function(e){console.error(e)})}function z(t,n){var o=Pn.querySelector(".layer");o.dataset.index=n,t.rect.width/devicePixelRatio>120?o.classList.add("wideEnough"):o.classList.remove("wideEnough"),t.rect.height/devicePixelRatio>120?o.classList.add("longEnough"):o.classList.remove("longEnough"),o.style.width=f(t.rect.width),o.dataset.width=g(t.rect.width),o.style.height=f(t.rect.height),o.dataset.height=g(t.rect.height),o.style.left=f(t.rect.x),o.style.top=f(t.rect.y),Kn.appendChild(document.importNode(Pn,!0));var r;"text"===t.type&&!t.fills.length&&t.color?(r=new e(t.color),-1===uo.indexOf(r.toHexString())&&(k(r,Dt),uo.push(r.toHexString()))):t.fills.forEach(function(t){switch(t.fillType){case"color":if(r=new e(t.color),-1!==uo.indexOf(r.toHexString()))return;k(r,Dt),uo.push(r.toHexString());break;case"gradient":t.gradient.colorStops.forEach(function(t){r=new e(t.color),-1===uo.indexOf(r.toHexString())&&(k(r,Dt),uo.push(r.toHexString()))})}})}function K(e){e.classList.remove("yellow","orange","peach","green","turquoise")}function W(t){var n=document.createElement("div"),o=Je[new e(t.color).hexBase()];return n.classList.add("dot",o),n.dataset.id=t._id,n.dataset.status=te(t),n.textContent=t.name||"?",n.dataset.color=o,n.dataset.position=t.x<=.5?"left":"right",n.style.left="calc("+100*t.x+"% - 13px)",n.style.top="calc("+100*t.y+"% - 13px)",Nn.appendChild(n),Nn.lastElementChild}function Y(){var e=jn.value.trim();if(e){var t=mo._id,n=bo._id,o={author:Zeplin.user._id,note:e,created:Date.now(),updated:Date.now()},r=Le(o);fe(),r.style.opacity=.5,ve(),Dn.classList.remove("composing"),Ro.comments=[{note:e}];var s=Ro;delete s.name;var a=new XMLHttpRequest;a.open("POST",Zeplin.urls.baseURL+"/projects/"+t+"/screens/"+n+"/dots"),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Zeplin-Token",Zeplin.user.token),Zeplin.pusher.connection.socket_id&&a.setRequestHeader("Zeplin-Socket-Id",Zeplin.pusher.connection.socket_id),a.responseType="json",a.addEventListener("load",function(){switch(a.status){case 201:xo=a.response,xo.x=s.x,xo.y=s.y,xo.color=s.color,xo.comments[0].note=s.comments[0].note,To.dataset.id=xo._id,To.dataset.name=xo.name,bo.dots.push(xo),Un.innerHTML="&nbsp;",jn.value="",r.dataset.id=xo.comments[0]._id,r.removeAttribute("style"),mixpanel.track("Created dot");break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(a.response.title+"\n"+a.response.message),location.replace("login.html");break;case 410:default:r.remove(),Dn.classList.add("composing"),jn.focus(),alert(a.response?a.response.title+"\n"+a.response.message:"We're experiencing a problem here, our developers are on the case. Please try again later.")}}),a.addEventListener("error",function(){r.remove(),Dn.classList.add("composing"),jn.focus(),alert("We're experiencing a problem here, our developers are on the case. Please try again later.")}),a.send(JSON.stringify(s))}}function G(e){var t=To.dataset.color;if(K(To),To.classList.add(e),To.dataset.color=e,K(Hn),Hn.classList.add(e),!xo)return void(Ro.color=$e[e]);var n=mo._id,o=bo._id,r=xo._id,s=new XMLHttpRequest;s.open("PUT",Zeplin.urls.baseURL+"/projects/"+n+"/screens/"+o+"/dots/"+r),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Zeplin-Token",Zeplin.user.token),Zeplin.pusher.connection.socket_id&&s.setRequestHeader("Zeplin-Socket-Id",Zeplin.pusher.connection.socket_id),s.responseType="json",s.addEventListener("load",function(){switch(s.status){case 204:xo.color=$e[e],mixpanel.track("Changed dot color");break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(s.response.title+"\n"+s.response.message),location.replace("login.html");break;case 410:default:K(To),To.classList.add(t),To.dataset.color=t,K(Hn),Hn.classList.add(t),alert(s.response?s.response.title+"\n"+s.response.message:"We're experiencing a problem here, our developers are on the case. Please try again later.")}}),s.addEventListener("error",function(){K(To),To.classList.add(t),To.dataset.color=t,K(Hn),Hn.classList.add(t),alert("We're experiencing a problem here, our developers are on the case. Please try again later.")}),s.send(JSON.stringify({color:$e[e]}))}function V(e){re(),Nn.innerHTML="",e.dots&&(e.dots.forEach(W),Co.dataset.mentionCount=ee(e),Co.dataset.commentCount=Q(e),Ke())}function X(){_n.textContent=(100*Bo).toFixed(),Ho||(requestAnimationFrame(function(){var e=-1;ko&&(e=parseInt(ko.dataset.index,10)+1),J(bo,"zoom"),Rn.classList.contains("zooming")?Zn.addEventListener("transitionend",function t(){Zn.removeEventListener("transitionend",t),Rn.classList.remove("zooming"),-1!==e&&ue(document.querySelector(".layer:nth-child("+e+")")),he()}):(-1!==e&&ue(document.querySelector(".layer:nth-child("+e+")")),he()),Ho=!1}),Ho=!0)}function J(e,t){var n=e.currentSnapshot;switch(t){case"initial":case"replace":ae(),lo.src="",lo.src=n.url;case"zoom":case"density":Rn.style.width=f(n.width,240),Rn.style.height=f(n.height,120),Rn.style.backgroundPosition="calc(50vw - "+(140+wo/2+n.width/devicePixelRatio/2)+"px) 0",Zn.style.width=f(n.width),Zn.style.height=f(n.height),lo.style.width=f(n.width),lo.style.height=f(n.height);case"layers":default:ae(!0),Kn.innerHTML="",e.layers&&e.layers.forEach(z)}if("zoom"!==t)if(Ut.innerHTML="",Ft.innerHTML="",void 0===e.assets);else if(Array.isArray(e.assets)&&!e.assets.length||n.density!==mo.density)Ut.classList.remove("loading");else{var o={},r=[];e.assets.forEach(function(e){r.push(F(e,Ut)),e.contents.forEach(function(e){e.format in o?o[e.format]++:o[e.format]=1})}),Promise.race(r).then(function(){Ut.classList.remove("loading")});for(var s in o)j({aid:"all",format:s,count:o[s]},Ft)}}function $(e){return e.dots.reduce(function(e,t){return e||""!==te(t)},!1)}function Q(e){return e.dots?e.dots.reduce(function(e,t){return e+t.comments.filter(function(e){return"new"===e.status}).length},0):0}function ee(e){return e.dots?e.dots.reduce(function(e,t){return e+t.comments.filter(function(e){return"mentioned"===e.status}).length},0):0}function te(e){if(!e.comments)return"";for(var t="",n=0;n<e.comments.length;n++){if("mentioned"===e.comments[n].status)return"mentioned";"status"in e.comments[n]&&(t="highlighted")}return t}function ne(e){var t=e.getBoundingClientRect();return t.top>=172&&t.bottom<=window.innerHeight}function oe(e,t){e="string"==typeof e?parseInt(e,10):e;var n={block:"start",behavior:"smooth"},o=!0;t&&("scrollOptions"in t&&("object"==typeof t.scrollOptions?("block"in t.scrollOptions&&(n.block=t.scrollOptions.block),"behavior"in t.scrollOptions&&(n.behavior=t.scrollOptions.behavior)):n=t.scrollOptions),"updateURL"in t&&(o=t.updateURL)),Lo=e,So.classList.add("hidden"),So=Tn,Co.classList.remove("selected"),Co=p(e),bo=mo.screens[e],o&&(location.hash="pid="+mo._id+"&sid="+bo._id),Dt.innerHTML="",uo=[],V(bo),J(bo,"initial"),it.textContent=bo.name+" - "+mo.name+" - Zeplin",ct.textContent=bo.name,ut.scrollTop=0,At.classList.remove("hidden"),So.classList.remove("hidden"),Co.classList.add("selected"),Co.classList.remove("new","updated"),Ke(),n&&!ne(Co)&&setTimeout(function(){"scrollTo"in Element.prototype?Co.scrollIntoView(n):Co.scrollIntoView("start"===n.block)},4),dt.classList.remove("fetchend");var r=ho[bo._id];r.req&&r.req.readyState!==XMLHttpRequest.DONE?(dt.classList.add("fetchstart","fetching"),Dt.classList.add("loading"),Ut.classList.add("loading")):(dt.classList.remove("online","fetchstart","fetching"),Dt.classList.remove("loading"))}function re(){To&&!xo&&(To.remove(),Ro=null),Tn.removeEventListener("scroll",he),xo=null,To=null,On.innerHTML="",On.scrollTop=0,Hn.classList.add("hidden")}function se(){if(To){var e=To;re(),le(e)}}function ae(e){ie(),Wn.classList.add("hidden"),e||(At.classList.add("resourceView"),At.classList.remove("layerView"),Zn.removeEventListener("mouseover",de),Rn.removeEventListener("mousemove",ce)),ko&&(ko.classList.remove("selected"),ko=null)}function ie(){Jn.classList.add("hidden"),Qn.classList.add("hidden"),to.classList.add("hidden"),oo.classList.add("hidden")}function de(e){if(e.stopPropagation(),!e.target.classList.contains("layer"))return ie(),void Zn.classList.remove("measuring");Zn.classList.add("measuring"),qo=e.target;var t=tt.rect.x,n=t+tt.rect.width,o=tt.rect.y,r=o+tt.rect.height,s=bo.layers[qo.dataset.index],a=s.rect.x,i=a+s.rect.width,d=s.rect.y,c=d+s.rect.height,l=!1,u=!1;if(ie(),t>i)Jn.style.left=f(i),Jn.style.width=f(t-i),$n.textContent=g(t-i),Jn.classList.remove("hidden");else if(t>a&&i>n)Jn.style.left=f(a),Jn.style.width=f(t-a),$n.textContent=g(t-a),Jn.classList.remove("hidden"),Qn.style.left=f(n),Qn.style.width=f(i-n),eo.textContent=g(i-n),Qn.classList.remove("hidden"),to.style.left=f((t+n)/2),oo.style.left=f((t+n)/2),l=!0;else if(a>t&&n>i)Jn.style.left=f(t),Jn.style.width=f(a-t),$n.textContent=g(a-t),Jn.classList.remove("hidden"),Qn.style.left=f(i),Qn.style.width=f(n-i),eo.textContent=g(n-i),Qn.classList.remove("hidden");else if(i>t&&n>i){Jn.style.left=f(a),Jn.style.width=f(t-a),$n.textContent=g(t-a),Jn.classList.remove("hidden");var m=i-t;m/window.devicePixelRatio>7&&(to.style.left=f((i+t)/2),oo.style.left=f((i+t)/2),l=!0)}else if(a>t&&n>a){Jn.style.left=f(t),Jn.style.width=f(a-t),$n.textContent=g(a-t),Jn.classList.remove("hidden");var m=n-a;m/window.devicePixelRatio>7&&(to.style.left=f((a+n)/2),oo.style.left=f((a+n)/2),l=!0)}else a>n&&(Qn.style.left=f(n),Qn.style.width=f(a-n),eo.textContent=g(a-n),Qn.classList.remove("hidden"));if(l||(to.style.left=f((a+i)/2),oo.style.left=f((a+i)/2)),o>c)to.style.top=f(c),to.style.height=f(o-c),no.textContent=g(o-c),to.classList.remove("hidden");else if(o>d&&c>r)to.style.top=f(d),to.style.height=f(o-d),no.textContent=g(o-d),to.classList.remove("hidden"),oo.style.top=f(r),oo.style.height=f(c-r),ro.textContent=g(c-r),oo.classList.remove("hidden"),Jn.style.top=f((o+r)/2),Qn.style.top=f((o+r)/2),u=!0;else if(d>o&&r>c)to.style.top=f(o),to.style.height=f(d-o),no.textContent=g(d-o),to.classList.remove("hidden"),oo.style.top=f(c),oo.style.height=f(r-c),ro.textContent=g(r-c),oo.classList.remove("hidden");else if(c>o&&r>c){to.style.top=f(d),to.style.height=f(o-d),no.textContent=g(o-d),to.classList.remove("hidden");var p=c-o;p/window.devicePixelRatio>7&&(Jn.style.top=f((c+o)/2),Qn.style.top=f((c+o)/2),u=!0)}else if(d>o&&r>d){to.style.top=f(o),to.style.height=f(d-o),no.textContent=g(d-o),to.classList.remove("hidden");var p=r-d;p/window.devicePixelRatio>7&&(Jn.style.top=f((d+r)/2),Qn.style.top=f((d+r)/2),u=!0)}else d>r&&(oo.style.top=f(r),oo.style.height=f(d-r),ro.textContent=g(d-r),oo.classList.remove("hidden"));u||(Jn.style.top=f((d+c)/2),Qn.style.top=f((d+c)/2))}function ce(e){var t=Zn.getBoundingClientRect(),n=tt.rect.x,o=n+tt.rect.width,r=tt.rect.y,s=r+tt.rect.height;ie(),qo=null,e.clientX<t.left&&(Jn.style.left=0,Jn.style.width=f(n),$n.textContent=g(n),Jn.style.top=f((r+s)/2),Jn.classList.remove("hidden")),e.clientY<t.top&&(to.style.top=0,to.style.height=f(r),no.textContent=g(r),to.style.left=f((n+o)/2),to.classList.remove("hidden")),e.clientX>t.right&&(Qn.style.left=f(o),Qn.style.width=f(bo.currentSnapshot.width-o),eo.textContent=g(bo.currentSnapshot.width-o),Qn.style.top=f((r+s)/2),Qn.classList.remove("hidden")),e.clientY>t.bottom&&(oo.style.top=f(s),oo.style.height=f(bo.currentSnapshot.height-s),ro.textContent=g(bo.currentSnapshot.height-s),oo.style.left=f((n+o)/2),oo.classList.remove("hidden"))}function le(t,n){if(t&&mo.users){var o="string"==typeof t?document.querySelector(".dot[data-id='"+t+"']"):t;if(!o||o===To)return void(n&&Fe(n));if(delete po.did,delete po.cmid,On.innerHTML="",On.scrollTop=0,Hn.classList.add("hidden"),To&&!xo&&To.remove(),To=o,K(Hn),Hn.classList.remove("left","right"),Hn.classList.add(Je[new e($e[To.dataset.color]).hexBase()],To.dataset.position),Un.innerHTML="&nbsp",jn.value="",Dn.classList.remove("hidden"),"undefined"===To.dataset.id)Hn.dataset.id="undefined",Dn.classList.add("composing"),setTimeout(function(){jn.focus()},4);else{for(var r=0;r<bo.dots.length;r++)if(bo.dots[r]._id===To.dataset.id){xo=bo.dots[r];break}xo.comments.forEach(Le),Hn.dataset.id=xo._id,To.dataset.status="",Co.dataset.mentionCount=ee(bo),Co.dataset.commentCount=Q(bo),Ke(),ve(),Dn.classList.remove("composing")}Hn.classList.remove("hidden"),Oo=Hn.getBoundingClientRect(),fe(),Tn.addEventListener("scroll",he),"undefined"!==To.dataset.id&&setTimeout(function(){if(n){var e=(bo.currentSnapshot.width*xo.x-Tn.offsetWidth)/2+120,t=(bo.currentSnapshot.height*xo.y-Tn.offsetHeight)/2+60;"scrollTo"in Element.prototype?Tn.scrollTo({left:e,top:t,behavior:"smooth"}):(Tn.scrollLeft=e,Tn.scrollTop=t),Fe(n)}else On.lastElementChild.scrollIntoView()},200)}}function ue(t){if(t!==ko){ie(),ko&&ko.classList.remove("selected"),ko=t,tt=bo.layers[ko.dataset.index];var n=tt.rect.width,o=tt.rect.height,r=tt.rect.x,s=tt.rect.y,a=tt.rotation,i=tt.opacity,d=tt.borderRadius,c=tt.blendMode;ko.classList.add("selected"),Yn.style.top=f(s),Vn.style.top=f(s+o-devicePixelRatio/Bo),Xn.style.left=f(r),Gn.style.left=f(r+n-devicePixelRatio/Bo),
Wn.classList.remove("hidden"),Zn.addEventListener("mouseover",de),Wt.textContent=tt.name,Yt.textContent=g(r),Gt.textContent=g(s),Vt.textContent=g(n),Xt.textContent=g(o),Jt.textContent=0===a?"":a+"°",$t.textContent=1===i?"":Math.floor(100*i)+"%",Qt.textContent=g(0===d?void 0:d),en.textContent="normal"===c?"":c;var l=0;if(tt.borders.length?(pn.innerHTML="",tt.borders.forEach(function(t){switch(t.position){case"outside":l=Math.max(l,t.thickness);break;case"center":l=Math.max(l,t.thickness/2)}switch(un.querySelector(".borderPosition").textContent=t.position,un.querySelector(".borderThickness").textContent=g(t.thickness),pn.appendChild(document.importNode(un,!0)),t.fillType){case"color":k(new e(t.color),pn);break;case"gradient":I(t.gradient,pn)}}),mn.classList.remove("hidden")):mn.classList.add("hidden"),tt.shadows.length?(gn.innerHTML="",tt.shadows.forEach(B),hn.classList.remove("hidden")):hn.classList.add("hidden"),tt.blur?(vn.textContent=tt.blur.type,Ln.textContent=g(tt.blur.radius),yn.classList.remove("hidden")):yn.classList.add("hidden"),"text"===tt.type)Kt.classList.add("textLayer"),tn.textContent=tt.fontFace,nn.textContent=g(tt.fontSize,"text"),on.textContent=g(tt.lineHeight,"text"),rn.textContent=g(tt.letterSpacing,"text"),sn.innerHTML="",tt.fills.length?tt.fills.forEach(function(e){_(tt.type,e)}):tt.color&&k(new e(tt.color),sn),dn.textContent=tt.content;else if(Kt.classList.remove("textLayer"),tt.fills.length?(ln.innerHTML="",tt.fills.forEach(function(e){_(tt.type,e)}),cn.classList.remove("hidden")):cn.classList.add("hidden"),tt.exportable){for(var u=0;u<bo.assets.length&&(Io=bo.assets[u],Io.layerName!==tt.name);u++);if(Io){var m=M(Io.contents);D(m).then(function(e){xn.className=e.lightness}),xn.src=m.url,xn.srcset=U(Io.contents),En.textContent=Io.displayName,En.title=Io.displayName;for(var p={},u=0;u<Io.contents.length;u++){var h=Io.contents[u];h.format in p?p[h.format]++:p[h.format]=1}wn.innerHTML="";for(var y in p)j({aid:Io._id,format:y,count:p[y]},wn);bn.classList.remove("hidden")}else bn.classList.add("hidden")}else bn.classList.add("hidden");At.classList.remove("resourceView"),At.classList.add("layerView")}}function me(){Rn.classList.add("noteMode"),Ao=!0}function pe(){Rn.classList.remove("noteMode"),Ao=!1}function fe(){var e,t,n=To.getBoundingClientRect(),o=!1;"left"===To.dataset.position?(n.left>window.innerWidth-280&&(o=!0),n.left<Oo.width+20?(o=!0,e=6):n.left-7>window.innerWidth?(o=!0,e=window.innerWidth-Oo.width-6):(o=o||!1,e=n.left-Oo.width-13)):(n.right<wo&&(o=!0),n.right+Oo.width+20>window.innerWidth?(o=!0,e=window.innerWidth-Oo.width-6):n.left<-27?(o=!0,e=6):(o=o||!1,e=n.right+13)),n.top<92?(o=!0,t=66):n.top+Oo.height-18>window.innerHeight?(o=!0,t=window.innerHeight-Oo.height-6):(o=o||!1,t=n.top+n.height/2-38),Hn.classList.toggle("overflown",o),Hn.style.webkitTransform="translate3d("+e.toFixed()+"px, "+t.toFixed()+"px, 0)",Hn.style.transform="translate("+e.toFixed()+"px, "+t.toFixed()+"px)"}function he(){To&&!Mo&&(requestAnimationFrame(function(){fe(),Mo=!1}),Mo=!0)}function ge(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;")}function ye(t){return Do=[],Uo.link(t).replace(/#(\w+)/g,function(t,n){for(var o=0;o<mo.colors.length;o++){var r=mo.colors[o];if(r.name===n)return'<span class="color">'+t+'<span class="colorPreview" style="background-color:'+new e(r).toCSS()+'"></span></span>'}if(/#[\da-f]{6}/i.test(t)){for(var o=0;o<mo.colors.length;o++){var r=mo.colors[o];if(new e(r).toHexString()===t.toLowerCase())return'<span class="color">#'+r.name+'<span class="colorPreview" style="background-color:'+t+'"></span></span>'}return'<span class="color">'+t+'<span class="colorPreview" style="background-color:'+t+'"></span></span>'}return t}).replace(st,function(e){return'<span class="user'+(Zo.test(e)?" self":"")+'">'+e+"</span>"}).replace(/{{link:(\d+)}}/g,function(e,t){return Do[parseInt(t,10)]})}function ve(){Mn.textContent=On.lastElementChild.classList.contains("commentOwner")?"POST":"REPLY"}function Le(e){delete e.status;for(var t,n=0;n<mo.users.length;n++)if(mo.users[n].user._id===e.author){t=mo.users[n].user;break}var o=zn.querySelector(".commentAuthorImage"),r=zn.querySelector(".commentAuthorName");if(t){var s=We+md5(t.email);o.src=s+"?s=36",o.srcset=s+"?s=72 2x",r.textContent=t.username}else o.src="../img/icPopupProfile.svg",o.srcset="",r.textContent="Anonymous";var a=zn.querySelector(".comment");a.dataset.id=e._id,e.author&&e.author!==Zeplin.user._id?a.classList.remove("commentOwner"):a.classList.add("commentOwner");var i=new Date(e.created),d=new Date(e.updated);zn.querySelector(".commentCreated").setAttribute("datetime",i),zn.querySelector(".commentMirror").innerHTML=ye(ge(e.note)),zn.querySelector(".commentEdited").setAttribute("datetime",d-i>3e5?d:""),On.appendChild(document.importNode(zn,!0));var c=On.lastElementChild,l=c.querySelector(".commentNote"),u=c.querySelector(".commentMirror");return l.addEventListener("input",function(){u.innerHTML=ge(l.value)+"&nbsp;"}),c}function be(e,t){for(var n,o=0;o<mo.users.length;o++)if(mo.users[o].user._id===t.author){n=mo.users[o].user;break}var r=e.querySelector(".commentAuthorImage"),s=e.querySelector(".commentAuthorName");if(n){var a=We+md5(n.email);r.src=a+"?s=36",r.srcset=a+"?s=72 2x",s.textContent=n.username}else r.src="../img/icPopupProfile.svg",r.srcset="",s.textContent="Anonymous";e.dataset.id=t._id,t.author&&t.author!==Zeplin.user._id?e.classList.remove("commentOwner"):e.classList.add("commentOwner");var i=new Date(t.created),d=new Date(t.updated);e.querySelector(".commentCreated").setAttribute("datetime",i),e.querySelector(".commentMirror").innerHTML=ye(ge(t.note)),e.querySelector(".commentEdited").setAttribute("datetime",d-i>3e5?d:"")}function xe(){var e=jn.value.trim();if(e){var t=mo._id,n=bo._id,o=xo._id,r={author:Zeplin.user._id,note:e,created:Date.now(),updated:Date.now()},s=Le(r);fe(),s.style.opacity=.5,s.scrollIntoView(),ve(),Dn.classList.remove("composing");var a=new XMLHttpRequest;a.open("POST",Zeplin.urls.baseURL+"/projects/"+t+"/screens/"+n+"/dots/"+o+"/comments"),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Zeplin-Token",Zeplin.user.token),Zeplin.pusher.connection.socket_id&&a.setRequestHeader("Zeplin-Socket-Id",Zeplin.pusher.connection.socket_id),a.responseType="json",a.addEventListener("load",function(){switch(a.status){case 201:xo.comments.push(a.response),Un.innerHTML="&nbsp;",jn.value="",s.dataset.id=a.response._id,s.removeAttribute("style"),mixpanel.track("Created comment");break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(a.response.title+"\n"+a.response.message),location.replace("login.html");break;case 410:default:s.remove(),Dn.classList.add("composing"),jn.focus(),alert(a.response?a.response.title+"\n"+a.response.message:"We're experiencing a problem here, our developers are on the case. Please try again later.")}}),a.addEventListener("error",function(){s.remove(),Dn.classList.add("composing"),jn.focus(),alert("We're experiencing a problem here, our developers are on the case. Please try again later.")}),a.send(JSON.stringify({note:e}))}}function Ee(e){var t=e.querySelector(".commentMirror"),n=e.querySelector(".commentNote"),o=n.value.trim();if(o){if(Eo.note===o)return t.innerHTML=ye(ge(Eo.note)),e.classList.remove("editing"),void Dn.classList.remove("hidden");var r=mo._id,s=bo._id,a=xo._id,i=e.dataset.id;e.classList.remove("editing"),e.style.opacity=.5,Dn.classList.remove("hidden"),t.innerHTML=ye(ge(o));var d=new XMLHttpRequest;d.open("PUT",Zeplin.urls.baseURL+"/projects/"+r+"/screens/"+s+"/dots/"+a+"/comments/"+i+"/note"),d.setRequestHeader("Content-Type","application/json"),d.setRequestHeader("Zeplin-Token",Zeplin.user.token),Zeplin.pusher.connection.socket_id&&d.setRequestHeader("Zeplin-Socket-Id",Zeplin.pusher.connection.socket_id),d.responseType="json",d.addEventListener("load",function(){switch(d.status){case 204:Eo.note=o,be(e,Eo),e.removeAttribute("style"),mixpanel.track("Edited comment");break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(d.response.title+"\n"+d.response.message),location.replace("login.html");break;case 410:default:e.removeAttribute("style"),e.classList.add("editing"),Dn.classList.add("hidden"),n.focus(),alert(d.response?d.response.title+"\n"+d.response.message:"We're experiencing a problem here, our developers are on the case. Please try again later.")}}),d.addEventListener("error",function(){e.removeAttribute("style"),e.classList.add("editing"),Dn.classList.add("hidden"),n.focus(),alert("We're experiencing a problem here, our developers are on the case. Please try again later.")}),d.send(JSON.stringify({note:o}))}}function we(e){var t=mo._id,n=bo._id,o=xo._id,r=e.dataset.id;1===xo.comments.length?(Hn.classList.add("hidden"),To.classList.add("hidden")):(e.style.height=getComputedStyle(e).height,e.style.height=0,e.style.padding="0 6px 0 12px");var s=new XMLHttpRequest;s.open("DELETE",Zeplin.urls.baseURL+"/projects/"+t+"/screens/"+n+"/dots/"+o+"/comments/"+r),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Zeplin-Token",Zeplin.user.token),Zeplin.pusher.connection.socket_id&&s.setRequestHeader("Zeplin-Socket-Id",Zeplin.pusher.connection.socket_id),s.responseType="json",s.addEventListener("load",function(){switch(s.status){case 204:e.remove();for(var t=0;t<xo.comments.length;t++)if(xo.comments[t]._id===r){xo.comments.splice(t,1);break}if(xo.comments.length)ve(),fe();else{for(var n=0;n<bo.dots.length;n++)if(bo.dots[n]._id===o){bo.dots.splice(n,1);break}To.remove(),xo=null,To=null,On.innerHTML="",On.scrollTop=0}mixpanel.track("Deleted comment");break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(s.response.title+"\n"+s.response.message),location.replace("login.html");break;case 410:default:1===xo.comments.length?(Hn.classList.remove("hidden"),To.classList.remove("hidden")):e.removeAttribute("style"),alert(s.response?s.response.title+"\n"+s.response.message:"We're experiencing a problem here, our developers are on the case. Please try again later.")}}),s.addEventListener("error",function(){1===xo.comments.length?(Hn.classList.remove("hidden"),To.classList.remove("hidden")):e.removeAttribute("style"),alert("We're experiencing a problem here, our developers are on the case. Please try again later.")}),s.send()}function Ce(e,t){var n=document.createElement("div");n.classList.add("toast",t),n.textContent=e,document.body.appendChild(n),setTimeout(function(){n.classList.add("show"),setTimeout(function(){n.addEventListener("transitionend",function(){n.remove()}),n.classList.remove("show")},3e3)},50)}function Se(e){var t="#text"===e.target.nodeName?e.target.nextElementSibling?e.target.nextElementSibling:e.target.parentElement:e.target,n=(t.id?t.id:t.className).replace(/[A-Z]/g,function(e){return" "+e.toLowerCase()}).replace(/^./,function(e){return e.toUpperCase()}).replace(/ with label$/,"");n&&-1===["Sidebar row","No border","No screen colors","No screen assets","No color message"].indexOf(n)&&mixpanel.track("Copied something from "+this.id.replace(/[A-Z]/g,function(e){return" "+e.toLowerCase()}),{type:n})}function ke(e){return"//\n//  UIColor+"+xt.value+"."+e+"\n//  "+mo.name+"\n//\n//  Generated on Zeplin. (by "+Zeplin.user.username+" on "+(new Date).toLocaleDateString()+").\n//  Copyright (c) 2014 __MyCompanyName__. All rights reserved.\n//\n\n"}function Ie(e){return"//\n//  NSColor+"+Ct.value+"."+e+"\n//  "+mo.name+"\n//\n//  Generated on Zeplin. (by "+Zeplin.user.username+" on "+(new Date).toLocaleDateString()+").\n//  Copyright (c) 2014 __MyCompanyName__. All rights reserved.\n//\n\n"}function _e(){var e=ke("h")+"#import <UIKit/UIKit.h>\n\n@interface UIColor ("+xt.value+")\n\n"+mo.colors.reduce(function(e,t){return e+"+ (UIColor *)"+Et.value+"_"+t.name.charAt(0).toLowerCase()+t.name.substr(1)+"Color;\n"},"")+"\n@end",t=ke("m")+'#import "UIColor+'+xt.value+'.h"\n\n@implementation UIColor ('+xt.value+")\n\n"+mo.colors.reduce(function(e,t){var n=parseFloat(t.a.toFixed(1))===parseFloat(t.a.toFixed(2))?t.a.toFixed(1):t.a.toFixed(2);return e+"+ (UIColor *)"+mo.prefix+"_"+t.name.charAt(0).toLowerCase()+t.name.substr(1)+"Color {\n    return [UIColor colorWithRed:"+t.r.toFixed(1)+"f / 255.0f\n                           green:"+t.g.toFixed(1)+"f / 255.0f\n                            blue:"+t.b.toFixed(1)+"f / 255.0f\n                           alpha:"+n+"f];\n}\n\n"},"")+"@end",n=new JSZip;n.file("UIColor+"+xt.value+".h",e),n.file("UIColor+"+xt.value+".m",t),H({data:URL.createObjectURL(n.generate({type:"blob"})),name:"colors_"+mo.name+".zip"}),mixpanel.track("Generated iOS color category")}function Be(){var e=Ie("h")+"#import <Cocoa/Cocoa.h>\n\n@interface NSColor ("+xt.value+")\n\n"+mo.colors.reduce(function(e,t){return e+"+ (NSColor *)"+St.value+"_"+t.name.charAt(0).toLowerCase()+t.name.substr(1)+"Color;\n"},"")+"\n@end",t=Ie("m")+'#import "NSColor+'+xt.value+'.h"\n\n@implementation NSColor ('+xt.value+")\n\n"+mo.colors.reduce(function(e,t){var n=parseFloat(t.a.toFixed(1))===parseFloat(t.a.toFixed(2))?t.a.toFixed(1):t.a.toFixed(2),o="";return o=t.r===t.g&&t.g===t.b?"+ (NSColor *)"+mo.prefix+"_"+t.name.charAt(0).toLowerCase()+t.name.substr(1)+"Color {\n    return [NSColor colorWithCalibratedWhite:"+t.r.toFixed(1)+"f / 255.0f alpha:"+n+"f];\n}\n\n":"+ (NSColor *)"+mo.prefix+"_"+t.name.charAt(0).toLowerCase()+t.name.substr(1)+"Color {\n    return [NSColor colorWithCalibratedRed:"+t.r.toFixed(1)+"f / 255.0f green:"+t.g.toFixed(1)+"f / 255.0f blue:"+t.b.toFixed(1)+"f / 255.0f alpha:"+n+"f];\n}\n\n",e+o},"")+"@end",n=new JSZip;n.file("NSColor+"+Ct.value+".h",e),n.file("NSColor+"+Ct.value+".m",t),H({data:URL.createObjectURL(n.generate({type:"blob"})),name:"colors_"+mo.name+".zip"}),mixpanel.track("Generated OSX color category")}function qe(){var t=kt.className,n={css:{prefix:"    --",midfix:": ",suffix:";\n"},sass:{prefix:"$",midfix:": ",suffix:";\n"},less:{prefix:"@",midfix:": ",suffix:";\n"},stylus:{prefix:"",midfix:" = ",suffix:"\n"}},o="/*\n"+et+"*/\n\n"+("css"===t?":root {\n":"")+mo.colors.reduce(function(o,r){return o+n[t].prefix+r.name.replace(/([A-Z])/g,function(e,t,n){return(n?"-":"")+e.toLowerCase()})+n[t].midfix+new e(r).toCSS()+n[t].suffix},"")+("css"===t?"}":"");H({data:URL.createObjectURL(new Blob([o],{type:"text/"+t})),name:"colors."+t}),mixpanel.track("Generated web colors",{type:t})}function Te(){var t='<?xml version="1.0" encoding="utf-8"?>\n<!--\n'+et+"-->\n\n<resources>\n"+mo.colors.reduce(function(t,n){return t+'    <color name="'+n.name.replace(/([A-Z])/g,function(e,t,n){return(n?"_":"")+e.toLowerCase()})+'">'+new e(n).toARGBHexString()+"</color>\n"},"")+"</resources>";H({data:URL.createObjectURL(new Blob([t],{type:"application/xml"})),name:"colors.xml"}),mixpanel.track("Generated Android color xml")}function Re(e){return new Promise(function(t,n){for(var o=0;o<mo.users.length;o++)if(mo.users[o].user._id===e)return t(mo.users[o]);n("User "+e+" does not exist.")})}function Ze(e){return new Promise(function(t,n){for(var o=0;o<mo.users.length;o++)if(mo.users[o].user._id===e)return t(mo.users.splice(o,1)[0]);n("User "+e+" does not exist.")})}function Pe(e){return new Promise(function(t,n){for(var o=0;o<mo.colors.length;o++)if(mo.colors[o]._id===e)return t(mo.colors[o]);n("Color "+e+" does not exist.")})}function Ne(e){return new Promise(function(t,n){for(var o=0;o<mo.colors.length;o++)if(mo.colors[o]._id===e)return t(mo.colors.splice(o,1)[0]);n("Color "+e+" does not exist.")})}function He(e){return new Promise(function(t,n){for(var o=0;o<mo.screens.length;o++)if(mo.screens[o]._id===e)return t(mo.screens[o]);n("Screen "+e+" does not exist.")})}function Ae(e){return new Promise(function(t,n){for(var o=0;o<mo.screens.length;o++)if(mo.screens[o]._id===e)return t(mo.screens.splice(o,1)[0]);n("Screen "+e+" does not exist.")})}function Oe(e,t){return new Promise(function(n,o){for(var r=0;r<e.dots.length;r++)if(e.dots[r]._id===t)return n(e.dots[r]);o("Dot "+t+" does not exist.")})}function De(e,t){return new Promise(function(n,o){for(var r=0;r<e.dots.length;r++)if(e.dots[r]._id===t)return n(e.dots.splice(r,1)[0]);o("Dot "+t+" does not exist.")})}function Me(e,t){return new Promise(function(n,o){for(var r=0;r<e.comments.length;r++)if(e.comments[r]._id===t)return n(e.comments[r]);o("Comment "+t+" does not exist.")})}function Ue(e,t){return new Promise(function(n,o){for(var r=0;r<e.comments.length;r++)if(e.comments[r]._id===t)return n(e.comments.splice(r,1)[0]);o("Comment "+t+" does not exist.")})}function je(e){if("Notification"in window&&"granted"===Notification.permission&&Zeplin.notificationStatus){var t=new Notification(e.title,{body:e.body,icon:We+md5(e.notifier.email)+"?s=160",name:0});t.addEventListener("show",function(){setTimeout(t.close.bind(t),5e3)}),"handler"in e&&t.addEventListener("click",e.handler)}}function Fe(e){if(e){var t="string"==typeof e?document.querySelector(".comment[data-id='"+e+"']"):e;t&&(t.classList.add("new"),t.scrollIntoView(),setTimeout(function(){t.classList.add("highlighted"),setTimeout(function(){t.classList.remove("highlighted"),t.addEventListener("transitionend",function(){t.classList.remove("new")})},1e3)},150))}}function ze(e){mo.name=e;var t;switch(Lo){case-2:t="Dashboard - ";break;case-1:t="Guideline - ";break;default:t=mo.screens[Lo].name+" - "}it.textContent=t+pt+" - Zeplin",ct.textContent=e,pt.textContent=e,Cn.title=e,ft.textContent=e}function Ke(){var e=0,t=0,n=0,o=0;[].forEach.call(document.querySelectorAll(".screen"),function(r){r.dataset.mentionCount&&(e+=parseInt(r.dataset.mentionCount,10)),r.dataset.commentCount&&(t+=parseInt(r.dataset.commentCount,10)),r.classList.contains("updated")&&n++,r.classList.contains("new")&&o++}),e?(kn.dataset.type="mention",kn.dataset.count=e,kn.textContent=e+" mention"+(1===e?"":"s")):t?(kn.dataset.type="comment",kn.dataset.count=t,kn.textContent=t+" new comment"+(1===t?"":"s")):n?(kn.dataset.type="updated",kn.dataset.count=n,kn.textContent=n+" screen"+(1===n?"":"s")+" updated"):o?(kn.dataset.type="newScreen",kn.dataset.count=o,kn.textContent=o+" new screen"+(1===o?"":"s")):(kn.dataset.type="",kn.dataset.count=0,kn.textContent="")}if(Zeplin.user){var We="https://www.gravatar.com/avatar/",Ye=function(){return/iPad|iPhone/.test(navigator.userAgent)?"ios":/Macintosh/.test(navigator.userAgent)?"mac":/Windows/.test(navigator.userAgent)?"win":/Linux/.test(navigator.userAgent)||/X11/.test(navigator.userAgent)?"linux":"unknown"}(),Ge=function(){return/Firefox/.test(navigator.userAgent)?"firefox":/OPR/.test(navigator.userAgent)?"opera":/Chrome/.test(navigator.userAgent)?"chrome":/Safari/.test(navigator.userAgent)?"safari":/Edge/.test(navigator.userAgent)?"edge":"unknown"}(),Ve=function(){switch(Ge){case"firefox":return parseInt(navigator.userAgent.match(/Firefox\/(\d*)/)[1],10);case"opera":return parseInt(navigator.userAgent.match(/OPR\/(\d*)/)[1],10);case"chrome":return parseInt(navigator.userAgent.match(/Chrome\/(\d*)/)[1],10);case"safari":return parseInt(navigator.userAgent.match(/Version\/(\d*)/)[1],10);case"edge":return parseInt(navigator.userAgent.match(/Edge\/(\d*)/)[1],10);default:return-1}}(),Xe={pdf:"application/pdf",png:"image/png",svg:"image/svg+xml"},Je={fecf33:"yellow",f69833:"orange",ee6723:"peach",c8cf2d:"green","0dcfda":"turquoise"},$e={yellow:{name:"yellow",r:254,g:207,b:51,a:1},orange:{name:"orange",r:246,g:152,b:51,a:1},peach:{name:"peach",r:238,g:103,b:35,a:1},green:{name:"green",r:200,g:207,b:45,a:1},turquoise:{name:"turquoise",r:13,g:207,b:218,a:1}},Qe={weekday:"long",year:"numeric",month:"short",day:"2-digit",hour12:!1,hour:"2-digit",minute:"2-digit"},et='    Generated by Zeplin\n    Copyright (C) 2014 - present Zeplin\n\n    Licensed under the Apache License, Version 2.0 (the "License");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an "AS IS" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n';document.body.classList.add(Ye);var tt,nt,ot,rt,st,at=document.getElementById("loading"),it=document.querySelector("title"),dt=document.querySelector("header"),ct=document.getElementById("header"),lt=document.getElementById("headerExtra"),ut=(document.getElementById("statusIndicator"),document.getElementById("mainContent")),mt=document.getElementById("projectIcon"),pt=document.getElementById("projectName"),ft=document.getElementById("infoProjectName"),ht=document.getElementById("projectMembers"),gt=document.getElementById("memberTemplate").content,yt=document.getElementById("generateButton"),vt=document.getElementById("generatePopup"),Lt=document.getElementById("colorGenerator"),bt=document.getElementById("iosExportButton"),xt=document.getElementById("iosCategoryName"),Et=document.getElementById("iosCategoryPrefix"),wt=document.getElementById("osxExportButton"),Ct=document.getElementById("osxCategoryName"),St=document.getElementById("osxCategoryPrefix"),kt=document.getElementById("webColorGenerator"),It=document.getElementById("webExportButton"),_t=document.getElementById("colorPalette"),Bt=document.getElementById("guidelineColorTemplate").content,qt=document.getElementById("lastEdited"),Tt=document.getElementById("created"),Rt=document.getElementById("projectType"),Zt=document.getElementById("slackButton"),Pt=document.getElementById("sidebarLeft"),Nt=document.getElementById("screenThumbnailTemplate").content,Ht=document.getElementById("sidebarLeftResizer"),At=document.getElementById("rightSidebar"),Ot=document.getElementById("resourceTabs"),Dt=document.getElementById("screenColors"),Mt=document.getElementById("colorTemplate").content,Ut=document.getElementById("screenAssets"),jt=document.getElementById("assetTemplate").content,Ft=document.getElementById("screenAssetExports"),zt=document.getElementById("assetExportTemplate").content,Kt=document.getElementById("layerView"),Wt=document.getElementById("layerName"),Yt=document.getElementById("layerPositionX"),Gt=document.getElementById("layerPositionY"),Vt=document.getElementById("layerWidth"),Xt=document.getElementById("layerHeight"),Jt=document.getElementById("layerRotation"),$t=document.getElementById("layerOpacity"),Qt=document.getElementById("layerRadius"),en=document.getElementById("layerBlendMode"),tn=document.getElementById("layerFontFace"),nn=document.getElementById("layerFontSize"),on=document.getElementById("layerLineHeight"),rn=document.getElementById("layerLetterSpacing"),sn=document.getElementById("layerTextColor"),an=(document.getElementById("layerContentContainer"),document.getElementById("copyLayerContent")),dn=document.getElementById("layerContent"),cn=document.getElementById("layerFillContainer"),ln=document.getElementById("layerFills"),un=document.getElementById("layerBorderTemplate").content,mn=document.getElementById("layerBorderContainer"),pn=document.getElementById("layerBorders"),fn=document.getElementById("layerShadowTemplate").content,hn=document.getElementById("layerShadowContainer"),gn=document.getElementById("layerShadows"),yn=document.getElementById("layerBlurContainer"),vn=document.getElementById("layerBlurType"),Ln=document.getElementById("layerBlurRadius"),bn=document.getElementById("layerAssetContainer"),xn=(document.getElementById("layerAssetPreviewContainer"),document.getElementById("layerAssetPreview")),En=document.getElementById("layerAssetName"),wn=document.getElementById("layerAssetExports"),Cn=document.getElementById("dashboardButton"),Sn=document.getElementById("guidelineButton"),kn=document.getElementById("updateStatus"),In=document.getElementById("zoomWidget"),_n=document.getElementById("zoomDropdownLabel"),Bn=document.getElementById("zoomDropdown"),qn=document.getElementById("maymusCheckbox"),Tn=document.getElementById("screenView"),Rn=document.getElementById("dotgrid"),Zn=document.getElementById("screenContainer"),Pn=document.getElementById("layerTemplate").content,Nn=document.getElementById("dots"),Hn=document.getElementById("dotPopup"),An=document.getElementById("dotColors"),On=document.getElementById("dotComments"),Dn=document.getElementById("newComment"),Mn=document.getElementById("newCommentButton"),Un=document.getElementById("newCommentMirror"),jn=document.getElementById("newCommentNote"),Fn=document.getElementById("newCommentSendButton"),zn=document.getElementById("commentTemplate").content,Kn=document.getElementById("layers"),Wn=document.getElementById("rulers"),Yn=document.getElementById("topRuler"),Gn=document.getElementById("rightRuler"),Vn=document.getElementById("bottomRuler"),Xn=document.getElementById("leftRuler"),Jn=(document.getElementById("distances"),document.getElementById("leftDistance")),$n=document.getElementById("leftDistanceValue"),Qn=document.getElementById("rightDistance"),eo=document.getElementById("rightDistanceValue"),to=document.getElementById("topDistance"),no=document.getElementById("topDistanceValue"),oo=document.getElementById("bottomDistance"),ro=document.getElementById("bottomDistanceValue"),so=document.getElementById("dashboard"),ao=document.getElementById("guideline"),io=document.getElementById("fontBook"),co=document.getElementById("screens"),lo=document.getElementById("screenImage"),uo=[],mo=JSON.parse(sessionStorage.getItem("project")),po={},fo=!1,ho={},go=0,yo={},vo=0,Lo=-2,bo=null,xo=null,Eo=null,wo=220,Co=Cn,So=so,ko=null,Io=null,_o="1x",Bo=1,qo=null,To=null,Ro=null,Zo=new RegExp([Zeplin.user.username,"everyone","all","tutti"].join("|")),Po=!1,No=5;sessionStorage.removeItem("project"),t(),window.addEventListener("hashchange",t),Ot.dataset.selection=document.querySelector(".resourceTab:checked").value,[].forEach.call(document.querySelectorAll(".resourceTab"),function(e){e.addEventListener("change",function(e){Ot.dataset.selection=e.target.value})}),Ft.addEventListener("click",A),Ut.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){if(e.target.classList.contains("exportAssets"))return A(e);for(var t=e.target;!t.classList.contains("asset");)t=t.parentElement;var n=t.nextElementSibling;n.style.height=t.classList.contains("expanded")?"0":48*n.children.length+"px",t.classList.toggle("expanded")}}),bn.addEventListener("click",function(e){if(e.button===Zeplin.MOUSE_BUTTON.LEFT){if(e.target.classList.contains("exportAssets"))return A(e);for(var t=e.target;!t.classList.contains("asset");)t=t.parentElement;var n=t.nextElementSibling;n.style.height=t.classList.contains("expanded")?"0":48*n.children.length+"px",t.classList.toggle("expanded")}}),An.addEventListener("click",function(e){e.target.classList.contains("dotColor")&&G(e.target.dataset.color)});var Ho=!1;Ht.addEventListener("mousedown",function(){Pt.style.willChange="width",Rn.style.willChange="background-position",document.body.classList.add("sidebarResizing"),document.addEventListener("mousemove",m),document.addEventListener("mouseup",function e(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",e),document.body.classList.remove("sidebarResizing"),Rn.style.willChange="auto",Pt.style.willChange="auto"})}),Pt.addEventListener("click",function(e){if(e.target.classList.contains("screen")){var t=parseInt(e.target.dataset.index,10);if(t===Lo)return void e.stopPropagation();oe(t,{scrollOptions:!1})}else"dashboardButton"===e.target.id?(So.classList.add("hidden"),So=so,Co.classList.remove("selected"),Co=Cn,Lo=-2,bo=null,it.textContent="Dashboard - "+mo.name+" - Zeplin",ct.textContent=mo.name,location.hash="pid="+mo._id+"&dashboard",At.classList.add("hidden"),y(),ut.scrollTop=0,So.classList.remove("hidden"),Co.classList.add("selected")):"guidelineButton"===e.target.id&&(So.classList.add("hidden"),So=ao,Co.classList.remove("selected"),Co=Sn,Lo=-1,bo=null,it.textContent="Guideline - "+mo.name+" - Zeplin",ct.textContent="Guideline",location.hash="pid="+mo._id+"&guideline",At.classList.add("hidden"),y(),ut.scrollTop=0,So.classList.remove("hidden"),Co.classList.add("selected"));L(Lo),x(Lo)}),document.addEventListener("keydown",function(e){if(e.keyCode===Zeplin.KEY_CODE.ESC)re(),ae(),vt.classList.add("hidden"),pe();else if(e.altKey)switch(e.keyCode){case Zeplin.KEY_CODE.KeyD:e.stopPropagation(),Cn.click();break;case Zeplin.KEY_CODE.KeyG:e.stopPropagation(),Sn.click();break;case Zeplin.KEY_CODE.ArrowUp:e.preventDefault(),Lo-1>=0&&oe(--Lo);break;case Zeplin.KEY_CODE.ArrowDown:e.preventDefault(),Lo+1<mo.screens.length&&oe(++Lo,{scrollOptions:{block:"end"}});break;case Zeplin.KEY_CODE.KeyPlus:case Zeplin.KEY_CODE.KeyPlusGecko:case Zeplin.KEY_CODE.KeyPlusChrome:case Zeplin.KEY_CODE.NumpadAdd:e.preventDefault(),e.stopPropagation();for(var t=0;t<Bn.childElementCount;t++){var n=parseFloat(Bn.children[t].value);if(n>Bo){Bo=n;break}}Bn.selectedIndex=t,Rn.classList.add("zooming"),X();break;case Zeplin.KEY_CODE.KeyMinus:case Zeplin.KEY_CODE.KeyMinusGecko:case Zeplin.KEY_CODE.KeyMinusChrome:case Zeplin.KEY_CODE.NumpadSubtract:e.preventDefault(),e.stopPropagation();for(var t=Bn.childElementCount-1;t>=0;t--){var n=parseFloat(Bn.children[t].value);if(Bo>n){Bo=n;break}}Bn.selectedIndex=t,Rn.classList.add("zooming"),X();break;case Zeplin.KEY_CODE.Digit0:case Zeplin.KEY_CODE.Digit0Chrome:case Zeplin.KEY_CODE.Numpad0:e.preventDefault(),e.stopPropagation(),Bo=1,Bn.selectedIndex=2,Rn.classList.add("zooming"),X()}}),document.addEventListener("click",function(e){e.button===Zeplin.MOUSE_BUTTON.LEFT&&(re(),ae(),vt.classList.add("hidden"),pe())}),document.getElementById("closeLayerView").addEventListener("click",function(){re(),ae()}),Zn.addEventListener("click",function(e){if(e.target.classList.contains("dot"))e.stopPropagation(),le(e.target);else if(Ao||("mac"===Ye?e.metaKey:e.ctrlKey)){e.stopPropagation(),pe(),qn.checked=!0,Nn.classList.remove("hidden"),On.innerHTML="",On.scrollTop=0,Hn.classList.add("hidden"),To&&!xo&&To.remove(),To=null;var t=Nn.getBoundingClientRect(),n=bo.dots;xo=null,Ro={name:n.length?""+(parseInt(n[n.length-1].name,10)+1):"1",x:(e.clientX-t.left)/t.width,y:(e.clientY-t.top)/t.height,color:$e.yellow},le(W(Ro))}else e.target.classList.contains("layer")&&(e.stopPropagation(),re(),ue(e.target))}),Zn.addEventListener("mouseleave",function(){ko&&(Rn.addEventListener("mousemove",ce),Zn.classList.add("measuring"))}),Zn.addEventListener("mouseenter",function(){Rn.removeEventListener("mousemove",ce)}),Rn.addEventListener("mouseenter",function(){Zn.classList.add("measuring")}),Rn.addEventListener("mouseleave",function(){Zn.classList.remove("measuring"),ie()}),document.getElementById("zoomIn").addEventListener("click",function(e){e.stopPropagation();for(var t=0;t<Bn.childElementCount;t++){var n=parseFloat(Bn.children[t].value);if(n>Bo){Bo=n;break}}Bn.selectedIndex=t,Rn.classList.add("zooming"),X()}),document.getElementById("zoomOut").addEventListener("click",function(e){e.stopPropagation();for(var t=Bn.childElementCount-1;t>=0;t--){var n=parseFloat(Bn.children[t].value);if(Bo>n){Bo=n;break}}Bn.selectedIndex=t,Rn.classList.add("zooming"),X()}),Bn.addEventListener("click",function(e){e.stopPropagation()}),Bn.addEventListener("change",function(){Bo=parseFloat(Bn.value),Rn.classList.add("zooming"),X()}),Rn.addEventListener("wheel",function(e){e.ctrlKey&&(e.preventDefault(),Bo=Math.max(.5,Math.min(Bo-e.deltaY/100,4)),X())}),Nn.classList.toggle("hidden",!qn.checked),qn.addEventListener("change",function(){Nn.classList.toggle("hidden",!qn.checked)});var Ao=!1;document.getElementById("addNoteButton").addEventListener("click",function(e){e.stopPropagation(),
me()});var Oo,Do,Mo=!1,Uo=new Autolinker({stripPrefix:!1,className:"link",phone:!1,twitter:!1,hashtag:!1,replaceFn:function(e,t){switch(t.getType()){case"url":var n=t.getUrl();if(0===n.indexOf(location.origin+location.pathname)){var o={},r=n.substr(n.indexOf("#")).replace("&amp;","&");if(r.substr(1).split("&").forEach(function(e){var t=e.split("=");o[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}),"pid"in o&&o.pid===mo._id){var s,a=["link"];if("sid"in o){for(var i="unknown",d=0;d<mo.screens.length;d++)if(mo.screens[d]._id===o.sid){i=mo.screens[d].name;break}a.push("screenLink"),s=i}else s="dashboard"in o?"dashboard":"guideline"in o?"guideline":mo.name;if(s)return Do.push('<a href="'+r+'" class="'+a.join(" ")+'">'+s+"</a>"),"{{link:"+(Do.length-1)+"}}"}}var c=e.getTagBuilder().build(t);return c.setAttr("rel","nofollow external"),Do.push(c.toAnchorString()),"{{link:"+(Do.length-1)+"}}";case"email":return Do.push(e.getTagBuilder().build(t).toAnchorString()),"{{link:"+(Do.length-1)+"}}";default:return!1}}});Hn.addEventListener("click",function(e){if(e.stopPropagation(),e.target.classList.contains("commentEditButton")){var t=e.target.parentElement.parentElement.parentElement.parentElement,n=Hn.querySelector(".comment.editing");n&&(n.querySelector(".commentMirror").innerHTML=ye(ge(Eo.note)),n.classList.remove("editing")),Dn.classList.add("hidden"),Dn.classList.remove("composing"),Un.innerHTML="&nbsp;",jn.value="";for(var o=t.querySelector(".commentMirror"),r=t.querySelector(".commentNote"),s=0;s<xo.comments.length;s++){var a=xo.comments[s];if(a._id===t.dataset.id){Eo=a;break}}o.innerHTML=ge(Eo.note),r.value=Eo.note,t.classList.add("editing"),r.focus()}else e.target.classList.contains("commentDeleteButton")?confirm("Delete your comment?\nDeleted comments cannot be restored.")&&we(e.target.parentElement.parentElement.parentElement.parentElement):e.target.classList.contains("commentDoneButton")&&Ee(e.target.parentElement.parentElement.parentElement)}),Hn.addEventListener("keydown",function(e){if(e.target.classList.contains("commentNote")){e.stopPropagation();for(var t=e.target.parentElement;!t.classList.contains("comment");)t=t.parentElement;switch(e.keyCode){case Zeplin.KEY_CODE.ENTER:("mac"===Ye?e.metaKey:e.ctrlKey)&&Ee(t);break;case Zeplin.KEY_CODE.ESC:t.classList.remove("editing"),Dn.classList.remove("hidden"),t.querySelector(".commentMirror").innerHTML=ye(ge(Eo.note)),e.target.blur()}}}),Mn.addEventListener("click",function(){Dn.classList.add("composing"),jn.focus()}),jn.addEventListener("input",function(){Un.innerHTML=ge(jn.value)+"&nbsp;"}),Fn.addEventListener("click",function(){xo?xe():Y()}),jn.addEventListener("keydown",function(e){switch(e.stopPropagation(),e.keyCode){case Zeplin.KEY_CODE.ENTER:("mac"===Ye?e.metaKey:e.ctrlKey)&&(xo?xe():Y());break;case Zeplin.KEY_CODE.ESC:Dn.classList.remove("composing"),Un.innerHTML="&nbsp;",jn.value="",xo||re()}});var jo="firefox"===Ge&&Ve>=41||"chrome"===Ge&&Ve>=43||"opera"===Ge&&Ve>=29;jo?an.addEventListener("click",function(){var e=getSelection(),t=!1;if(!e||!e.anchorNode||e.anchorNode.parentNode!==dn){var n=document.createRange();e.removeAllRanges(),n.selectNodeContents(dn.firstChild),e.addRange(n),t=!0}try{document.execCommand("copy")&&Ce("Copied to clipboard!","right")}catch(o){console.error("Unable to copy layer content")}t&&e.removeAllRanges()}):an.remove(),dn.addEventListener("focus",function(){var e=getSelection(),t=document.createRange();if(e.removeAllRanges(),t.selectNodeContents(dn.firstChild),e.addRange(t),jo)try{document.execCommand("copy")&&Ce("Copied to clipboard!","right")}catch(n){console.error("Unable to copy layer content")}e.removeAllRanges(),t=document.createRange(),t.selectNodeContents(dn.firstChild),setTimeout(function(){e.addRange(t)},20)}),At.addEventListener("click",function(e){e.stopPropagation()}),At.addEventListener("contextmenu",function(e){e.stopPropagation()}),At.addEventListener("copy",Se),_t.addEventListener("copy",Se),Lt.addEventListener("click",function(e){e.stopPropagation()}),kt.className=document.querySelector("input[name='webColorType']:checked").value,[].forEach.call(document.querySelectorAll("input[name='webColorType']"),function(e){e.addEventListener("change",function(e){kt.className=e.target.value})}),bt.addEventListener("click",_e),wt.addEventListener("click",Be),It.addEventListener("click",qe),yt.addEventListener("click",function(e){switch(mixpanel.track("Clicked generate color button"),mo.type){case"android":Te();break;case"ios":e.preventDefault(),vt.classList.toggle("hidden"),xt.select();break;case"osx":e.preventDefault(),vt.classList.toggle("hidden"),Ct.select();break;case"web":e.preventDefault(),vt.classList.toggle("hidden")}}),Et.addEventListener("blur",function(){if(Et.value!==mo.prefix){var e=new XMLHttpRequest;e.open("PUT",Zeplin.urls.baseURL+"/projects/"+mo._id+"/prefix"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Zeplin-Token",Zeplin.user.token),Zeplin.pusher.connection.socket_id&&e.setRequestHeader("Zeplin-Socket-Id",Zeplin.pusher.connection.socket_id),e.responseType="json",e.addEventListener("load",function(){switch(e.status){case 200:mo.prefix=e.response.prefix;break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(e.response.title+"\n"+e.response.message),location.replace("login.html");break;case 410:}}),e.send(JSON.stringify({prefix:Et.value}))}}),St.addEventListener("blur",function(){if(St.value!==mo.prefix){var e=new XMLHttpRequest;e.open("PUT",Zeplin.urls.baseURL+"/projects/"+mo._id+"/prefix"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Zeplin-Token",Zeplin.user.token),Zeplin.pusher.connection.socket_id&&e.setRequestHeader("Zeplin-Socket-Id",Zeplin.pusher.connection.socket_id),e.responseType="json",e.addEventListener("load",function(){switch(e.status){case 200:mo.prefix=e.response.prefix;break;case 401:Zeplin.user=void 0,localStorage.removeItem("user"),sessionStorage.setItem("redirectTo",location.href),alert(e.response.title+"\n"+e.response.message),location.replace("login.html");break;case 410:}}),e.send(JSON.stringify({prefix:St.value}))}});var Fo=devicePixelRatio;setInterval(function(){devicePixelRatio!==Fo&&(Fo=devicePixelRatio,J(bo,"zoom"))},1e3),kn.addEventListener("click",function(){var e=co.querySelectorAll(".screen"),t=0>Lo?0:Lo,n=t;switch(kn.dataset.type){case"mention":do if(n=(n+1)%e.length,parseInt(e[n].dataset.mentionCount,10)){oe(n);break}while(n!==t);break;case"comment":do if(n=(n+1)%e.length,parseInt(e[n].dataset.commentCount,10)){oe(n);break}while(n!==t);break;case"updated":oe(co.querySelector(".screen.updated").dataset.index);break;case"newScreen":oe(co.querySelector(".screen.new").dataset.index)}});var zo=Zeplin.pusher.subscribe("private-project@"+po.pid);zo.bind("UpdateProjectDensity",function(e){r(e.body.density),Lo>=0&&J(bo,"density")}),zo.bind("UpdateProjectName",function(e){ze(e.body.name),s(e.body.prefix)}),zo.bind("UpdateProjectPrefix",function(e){s(e.body.prefix)}),zo.bind("ArchiveProject",function(e){Re(e.params.uid).then(function(e){alert(e.user.username+" archived this project.\n\nYou won't be able to access these resources from now on.\nIf you think this is a mistake, please contact "+e.user.username),location.replace("projects.html")})["catch"](function(e){console.warn(e)})}),zo.bind("DeleteProject",function(e){Re(e.params.uid).then(function(e){alert(e.user.username+" deleted this project.\n\nYou won't be able to access these resources from now on.\nIf you think this is a mistake, please contact "+e.user.username),location.replace("projects.html")})["catch"](function(e){console.warn(e)})}),zo.bind("InviteUser",function(e){var t={role:"user",user:e.body};mo.users.push(t),c(t),bo&&se()}),zo.bind("CreateUser",function(e){Re(e.params.uid).then(function(t){t.user.username=e.body.username,t.user.status="registered";var n=document.querySelector(".member[data-id='"+e.params.uid+"']");n&&(n.querySelector(".memberName").textContent=e.body.username,n.querySelector(".memberRole").textContent=""),bo&&se()}).then(l)["catch"](function(e){console.warn(e)})}),zo.bind("UpdateUsername",function(e){Re(e.params.uid).then(function(t){t.user.username=e.body.username;var n=document.querySelector(".member[data-id='"+e.params.uid+"']");n&&(n.querySelector(".memberName").textContent=e.body.username),bo&&se()})["catch"](function(e){console.warn(e)})}),zo.bind("UpdateEmail",function(e){Re(e.params.uid).then(function(t){t.user.email=e.body.email})["catch"](function(e){console.warn(e)})}),zo.bind("UpdateUserRole",function(e){Re(e.params.mid).then(function(t){t.role=e.body.role,e.params.mid===Zeplin.user._id&&(document.body.dataset.userRole=e.body.role,"admin"===document.body.dataset.userRole?Zt.href=n():Zt.removeAttribute("href"))}).then(l)["catch"](function(e){console.warn(e)})}),zo.bind("TransferOwnership",function(e){Re(e.params.uid).then(function(t){return t.role="admin",e.params.uid===Zeplin.user._id&&(document.body.dataset.userRole="admin"),Re(e.params.mid)}).then(function(t){t.role="owner",e.params.mid===Zeplin.user._id&&(document.body.dataset.userRole="owner",Zt.href=n())}).then(l)["catch"](function(e){console.warn(e)})}),zo.bind("RemoveUserFromProject",function(e){Ze(e.params.mid).then(function(){if(e.params.mid===Zeplin.user._id)return re(),Re(e.params.uid).then(function(e){alert(e.user.username+" removed you from '"+mo.name+"'\n\nYou won't be able to access these resources from now on.\nIf you think this is a mistake, please contact "+e.user.username),location.replace("projects.html")});var t=document.querySelector(".member[data-id='"+e.params.mid+"']");t&&t.remove()}).then(se)["catch"](function(e){console.warn(e)})}),zo.bind("CreateColor",function(t){S(t.body);var n=document.querySelectorAll(".color[data-color='"+new e(t.body).toHexString()+"']");[].forEach.call(n,function(e){e.querySelector(".colorName").textContent=t.body.name,e.classList.add("added")}),mo.colors.push(t.body),se()}),zo.bind("UpdateColor",function(t){Pe(t.params.cid).then(function(n){var o=document.querySelector(".color[data-id='"+n._id+"']");if("name"in t.body){var r=document.querySelectorAll(".color[data-color='"+new e(n).toHexString()+"']");[].forEach.call(r,function(e){e.querySelector(".colorName").textContent=t.body.name,e.classList.add("added")}),o.querySelector(".colorName").textContent=t.body.name,n.name=t.body.name}if("r"in t.body&&"g"in t.body&&"b"in t.body&&"a"in t.body){var r=document.querySelectorAll(".color[data-color='"+new e(n).toHexString()+"']");[].forEach.call(r,function(e){e.querySelector(".colorName").textContent="",e.classList.remove("added")});var s=new e(t.body);r=document.querySelectorAll(".color[data-color='"+s.toHexString()+"']"),[].forEach.call(r,function(e){e.querySelector(".colorName").textContent=n.name,e.classList.add("added")}),o.querySelector(".colorPreview").style.backgroundColor=s.toCSS(),o.querySelector(".colorHex").textContent=s.toHexString(),o.querySelector(".colorRGB").textContent=s.toRGBAString(),n.r=t.body.r,n.g=t.body.g,n.b=t.body.b,n.a=t.body.a}}).then(se)["catch"](function(e){console.warn(e)})}),zo.bind("DeleteColor",function(t){Ne(t.params.cid).then(function(t){var n=document.querySelectorAll(".color[data-color='"+new e(t).toHexString()+"']");if([].forEach.call(n,function(e){e.querySelector(".colorName").textContent="",e.classList.remove("added")}),mo.colors.length){var o=_t.querySelector(".color[data-id='"+t._id+"']");o&&o.remove()}else _t.innerHTML=""}).then(se)["catch"](function(e){console.warn(e)})}),zo.bind("CreateScreen",function(e){var t=E(e.body,mo.screens.length);e.params.uid!==Zeplin.user._id&&(t.classList.add("new"),Ke()),mo.screens.push(e.body),ho[e.body._id]={req:v(e.body),ready:!0,attempts:3},L(mo.screens.length-1),e.body.dots=[],yo[e.body._id]={req:null,ready:!1,attempts:0}}),zo.bind("UpdateScreenOrder",function(e){Ae(e.params.sid).then(function(t){mo.screens.splice(e.body.index,0,t);var n=document.querySelector(".screen[data-id='"+t._id+"']"),o=document.querySelector(".screen[data-index='"+e.body.index+"']"),r=parseInt(n.dataset.index,10);o=r<e.body.index?o.nextElementSibling:o,o?co.insertBefore(co.removeChild(n),o):co.appendChild(co.removeChild(n)),w(),n.classList.contains("selected")&&n.scrollIntoView()})["catch"](function(e){console.warn(e)})}),zo.bind("UpdateScreen",function(e){He(e.params.sid).then(function(t){var n=document.querySelector(".screen[data-id='"+t._id+"']");"name"in e.body&&(n.querySelector(".screenName").textContent=e.body.name,n.classList.contains("selected")&&(it.textContent=e.body.name+" - "+mo.name+" - Zeplin",ct.textContent=e.body.name),t.name=e.body.name),"description"in e.body&&console.log("Description:",e.body.description)})["catch"](function(e){console.warn(e)})}),zo.bind("CreateSnapshot",function(e){He(e.params.sid).then(function(t){var n=document.querySelector(".screen[data-id='"+t._id+"']");e.params.uid!==Zeplin.user._id&&(n.classList.add("updated"),Ke()),n.classList.contains("selected")&&(At.classList.add("resourceView"),At.classList.remove("layerView"),n.querySelector(".screenThumbnailImage").src=e.body.url),t.currentSnapshot=e.body,ho[t._id]={req:v(t,"replace"),ready:!0,attempts:3},L(parseInt(n.dataset.index,10))})["catch"](function(e){console.warn(e)})}),zo.bind("DeleteScreen",function(e){Ae(e.params.sid).then(function(t){var n=document.querySelector(".screen[data-id='"+t._id+"']");n.classList.contains("selected")&&Re(e.params.uid).then(function(e){alert(e.user.username+" deleted this screen\n\nYou won't be able to access '"+t.name+"' from now on."),Cn.click()})["catch"](function(e){console.warn(e)}),n.remove(),Ke(),C(),w()})["catch"](function(e){console.warn(e)})}),zo.bind("CreateDot",function(e){He(e.params.sid).then(function(t){var n,o=document.querySelector(".screen[data-id='"+e.params.sid+"']"),r=e.params.uid===Zeplin.user._id,s=bo&&bo._id===e.params.sid,a=Zo.test(e.body.comments[0].note);return t.dots.push(e.body),s&&(n=W(e.body)),!r&&(e.body.comments[0].status=a?"mentioned":"new",o.dataset.mentionCount=ee(t),o.dataset.commentCount=Q(t),s?n.dataset.status=te(e.body):o.classList.add("updated"),Ke(),a)?Re(e.params.uid).then(function(t){je({title:t.user.username+" mentioned you",body:e.body.comments[0].note,notifier:t.user,handler:function(){s||oe(o.dataset.index),le(e.body._id,e.body.comments[0]._id)}})}):void 0})["catch"](function(e){console.warn(e)})}),zo.bind("UpdateDot",function(t){He(t.params.sid).then(function(e){return Oe(e,t.params.did)}).then(function(n){var o=document.querySelector(".dot[data-id='"+n._id+"']");if("color"in t.body){var r=Je[new e(t.body.color).hexBase()];xo&&xo._id===n._id&&(K(Hn),Hn.classList.add(r)),o&&(K(o),o.classList.add(r),o.dataset.color=r),n.color=t.body.color}"x"in t.body&&"y"in t.body&&(o&&(o.dataset.position=t.body.x<=.5?"left":"right",o.style.left="calc("+100*t.body.x+"% - 10px)",o.style.top="calc("+100*t.body.y+"% - 10px)"),n.x=t.body.x,n.y=t.body.y)})["catch"](function(e){console.warn(e)})}),zo.bind("DeleteDot",function(e){He(e.params.sid).then(function(t){return De(t,e.params.did).then(function(){var n=document.querySelector(".screen[data-id='"+e.params.sid+"']"),o=document.querySelector(".dot[data-id='"+e.params.did+"']");$(t)||n.classList.remove("updated"),n.dataset.mentionCount=ee(t),n.dataset.commentCount=Q(t),Ke(),o&&(To===o&&re(),o.remove())})})["catch"](function(e){console.warn(e)})}),zo.bind("CreateDotComment",function(e){He(e.params.sid).then(function(t){return Oe(t,e.params.did).then(function(n){var o,r=document.querySelector(".screen[data-id='"+e.params.sid+"']"),s=document.querySelector(".dot[data-id='"+e.params.did+"']"),a=e.params.uid===Zeplin.user._id,i=bo&&bo._id===e.params.sid,d=xo&&xo._id===e.params.did,c=Zo.test(e.body.note);return n.comments.push(e.body),d&&(o=Le(e.body)),!a&&(d?(Fe(o),fe()):(e.body.status=c?"mentioned":"new",r.dataset.mentionCount=ee(t),r.dataset.commentCount=Q(t)),i?s.dataset.status=te(n):r.classList.add("updated"),Ke(),c)?Re(e.params.uid).then(function(t){je({title:t.user.username+" mentioned you",body:e.body.note,notifier:t.user,handler:function(){i||oe(r.dataset.index),le(e.params.did,e.body._id)}})}):void 0})})["catch"](function(e){console.warn(e)})}),zo.bind("UpdateDotCommentNote",function(e){He(e.params.sid).then(function(t){return Oe(t,e.params.did).then(function(n){return Me(n,e.params.cmid).then(function(o){var r=document.querySelector(".screen[data-id='"+e.params.sid+"']"),s=document.querySelector(".dot[data-id='"+e.params.did+"']"),a=document.querySelector(".comment[data-id='"+e.params.cmid+"']"),i=e.params.uid===Zeplin.user._id,d=bo&&bo._id===e.params.sid,c=xo&&xo._id===e.params.did,l=Zo.test(e.body.note),u=new Date(o.created),m=e.body.updated?new Date(e.body.updated):new Date,p=m-(o.updated?new Date(o.updated):u)>3e5;return o.note=e.body.note,o.updated=m,c&&(a.querySelector(".commentNote").innerHTML=ye(ge(e.body.note)),a.querySelector(".commentEdited").setAttribute("datetime",m-u>3e5?m:"")),!i&&(c?(Fe(a),fe()):(o.status=l?"mentioned":"updated",r.dataset.mentionCount=ee(t),r.dataset.commentCount=Q(t)),d?s.dataset.status=te(n):r.classList.add("updated"),Ke(),l&&p)?Re(e.params.uid).then(function(t){je({title:t.user.username+" mentioned you",body:e.body.note,notifier:t.user,handler:function(){d||oe(r.dataset.index),le(e.params.did,e.params.cmid)}})}):void 0})})})["catch"](function(e){console.warn(e)})}),zo.bind("DeleteDotComment",function(e){He(e.params.sid).then(function(t){var n=document.querySelector(".screen[data-id='"+e.params.sid+"']"),o=bo&&bo._id===e.params.sid;return Oe(t,e.params.did).then(function(r){var s=document.querySelector(".dot[data-id='"+e.params.did+"']"),a=xo&&xo._id===e.params.did;return Ue(r,e.params.cmid).then(function(){return r.comments.length?document.querySelector(".comment[data-id='"+e.params.cmid+"']"):(a&&re(),De(t,e.params.did).then(function(){return s}))}).then(function(e){a||(n.dataset.mentionCount=ee(t),n.dataset.commentCount=Q(t),Ke()),o&&(s.dataset.status=te(r)),e&&e.remove()})})})["catch"](function(e){console.warn(e)})}),zo.bind("AuthSlack",function(e){mo.integration=e.body.integration,document.getElementById("slackTeam").textContent=mo.integration.slack.teamName,document.getElementById("slackSettings").href=mo.integration.slack.incomingWebHook.configurationURL;var t=new URL(mo.integration.slack.incomingWebHook.configurationURL);document.getElementById("slackChannel").textContent=mo.integration.slack.incomingWebHook.channel,document.getElementById("slackChannel").href=t.origin+"/messages/"+mo.integration.slack.incomingWebHook.channel,document.getElementById("slackIntegration").classList.add("enabled")}),window.addEventListener("offline",function(){lt.textContent="Looks like there is a problem with the connection.",dt.className="offline"}),window.addEventListener("online",function(){Zeplin.user&&(lt.textContent="Keep working! Connection is back…",dt.className="online",Po=!0,i(po.pid))})}}();